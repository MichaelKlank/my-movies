# Installing iOS App on iPhone

## ⚠️ Important: Initial Setup After Clone

After cloning the repo or after `tauri ios init`, the project must be patched:

```bash
cd apps/tauri

# Option 1: Initialize AND patch in one step
pnpm tauri:ios:init

# Option 2: Patch only (if gen/ already exists)
pnpm tauri:ios:setup
```

**Why?** The `gen/apple/project.yml` is generated by Tauri and is in `.gitignore`. 
We use a custom build script (`tauri-ios-build.sh`) for correct PATH handling.

---

There are several ways to install the `.ipa` file on your iPhone:

## Method 1: Via Xcode (Recommended)

### Prerequisites:
- iPhone connected to Mac via USB
- Xcode installed
- Apple Developer Account (free for development)
- Code Signing configured in Xcode

### Steps:

1. **Open Xcode project:**
   ```bash
   cd apps/tauri
   pnpm tauri ios build --open
   ```

2. **In Xcode:**
   - Select your iPhone as build target (in the toolbar at the top)
   - Click "Run" (▶️) or press `Cmd+R`
   - Xcode builds the app and automatically installs it on your iPhone

3. **First time only:**
   - On iPhone: Settings → General → VPN & Device Management
   - Trust your developer certificate

## Method 2: Via Finder (macOS Catalina+)

### Prerequisites:
- iPhone connected to Mac via USB
- iPhone unlocked
- "Trust This Computer" confirmed on iPhone

### Steps:

1. **Connect iPhone to Mac** (USB cable)

2. **Open Finder** and select iPhone in the sidebar

3. **Find app file:**
   ```bash
   # The .ipa file should be here:
   apps/tauri/src-tauri/gen/apple/build/arm64/My Movies.ipa
   ```

4. **In Finder:**
   - Go to iPhone in the sidebar
   - Scroll to "Files" or "Apps"
   - Drag & drop the `.ipa` file into Finder
   - Or: Right-click on iPhone → "Apps" → "Add App" → select `.ipa`

## Method 3: Via Apple Configurator 2

### Prerequisites:
- Apple Configurator 2 installed (free in Mac App Store)
- iPhone connected via USB

### Steps:

1. **Open Apple Configurator 2**

2. **Connect iPhone** (appears in the list)

3. **Add app:**
   - Click on your iPhone
   - Click "Apps" → "+" → "Add App"
   - Select the `.ipa` file

## Method 4: Via TestFlight (for Beta Testing)

### Prerequisites:
- Apple Developer Account ($99/year)
- App Store Connect Account
- App already uploaded to App Store Connect

### Steps:

1. **Upload app to App Store Connect:**
   ```bash
   cd apps/tauri
   pnpm tauri ios build
   # Then via Xcode: Product → Archive → Distribute App → App Store Connect
   ```

2. **Configure TestFlight** in App Store Connect

3. **Add testers** (internal or external)

4. **Install TestFlight App** on iPhone

## Method 5: Via 3uTools or similar tools

⚠️ **Not recommended** - These tools may pose security risks.

## Troubleshooting

### "Untrusted Developer" Error:

1. On iPhone: Settings → General → VPN & Device Management
2. Find your developer certificate
3. Tap on it and select "Trust"

### "App could not be installed":

- Check if Code Signing is correctly configured
- Check if Bundle Identifier is correct
- Check if Provisioning Profile is valid
- Check Xcode console for error messages

### "Device not found":

- Check USB connection
- Check if iPhone is unlocked
- Check if "Trust This Computer" was confirmed
- Try a different USB cable

## Fastest Method

The fastest method is **Method 1 (Xcode)** because it:
- Automatically builds and installs
- Automatically manages Code Signing
- Shows errors directly
- Enables debugging

## Alternative: AirDrop (if possible)

If the `.ipa` file is small enough and both devices support AirDrop:

1. Find `.ipa` file in Finder
2. Right-click → Share → AirDrop
3. Select iPhone
4. On iPhone: Install

**Note:** AirDrop only works if the app is already signed and the iPhone trusts it.
